/* --- THEME DEFINITIONS --- */
:root {
    --primary-color: #007bff;
    --secondary-color: #6c757d;
    --danger-color: #dc3545;
    --success-color: #28a745;
    --warning-color: #ffc107;
    --background-color: #e9ecef;
    --card-background: #ffffff;
    --text-color: #212529;
    --text-color-light: #f8f9fa;
    --border-color: #dee2e6;
    --header-background: #343a40;
}
body.theme-dark {
    --primary-color: #0d6efd;
    --secondary-color: #6c757d;
    --danger-color: #dc3545;
    --success-color: #20c997;
    --warning-color: #ffc107;
    --background-color: #121212;
    --card-background: #1e1e1e;
    --text-color: #e9ecef;
    --text-color-light: #f8f9fa;
    --border-color: #495057;
    --header-background: #1e1e1e;
}
body.theme-forest {
    --primary-color: #2a9d8f;
    --secondary-color: #8ab17d;
    --danger-color: #e76f51;
    --success-color: #2a9d8f;
    --warning-color: #e9c46a;
    --background-color: #f4a261;
    --card-background: #fffcf7;
    --text-color: #264653;
    --text-color-light: #ffffff;
    --border-color: #e9c46a;
    --header-background: #264653;
}
/* --- AUTHENTICATION STYLES --- */
#auth-container {
    display: flex;
    justify-content: center;
    align-items: center;
    width: 100vw;
    height: 100vh;
    background-color: var(--background-color);
}
.auth-card {
    width: 100%;
    max-width: 400px;
    padding: 2rem;
}
.auth-switch {
    margin-top: 1.5rem;
    text-align: center;
    font-size: 0.9em;
}
.auth-error {
    color: var(--danger-color);
    text-align: center;
    margin-top: 1rem;
    min-height: 1.2em;
}
.btn-link {
    background: none;
    border: none;
    padding: 0;
    font-family: inherit;
    color: var(--primary-color);
    text-decoration: underline;
    font-size: inherit;
    cursor: pointer;
}
.btn-link:hover {
    color: var(--secondary-color);
}
/* --- GENERAL STYLES --- */
body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    margin: 0;
    background-color: var(--background-color);
    color: var(--text-color);
    transition: background-color 0.3s, color 0.3s;
}
header {
    background-color: var(--header-background);
    color: var(--text-color-light);
    padding: 1rem;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    position: relative;
    transition: background-color 0.3s;
}
.header-controls {
    display: flex;
    justify-content: space-between;
    align-items: center;
    position: absolute;
    top: 1rem;
    left: 1rem;
    right: 1rem;
}
#user-info {
    display: flex;
    align-items: center;
    gap: 0.75rem;
}
#user-info span { font-weight: bold; }
#logout-btn {
    font-size: 0.8em;
    padding: 0.3rem 0.6rem;
    background-color: var(--secondary-color);
    color: var(--text-color-light);
}
.theme-switcher-container { display: flex; align-items: center; gap: 0.5rem; }
.theme-switcher-container label { font-size: 0.9em; }
#theme-switcher {
    background-color: var(--secondary-color);
    color: var(--text-color-light);
    border: 1px solid var(--border-color);
    border-radius: 4px;
    padding: 0.2rem 0.4rem;
}
h1 { text-align: center; margin: 2rem 0 1rem 0; }
nav { display: flex; justify-content: center; flex-wrap: wrap; gap: 0.5rem; }
.tab-button {
    padding: 0.5rem 1rem;
    border: 1px solid var(--secondary-color);
    background-color: transparent;
    color: var(--text-color-light);
    cursor: pointer;
    border-radius: 5px;
    font-size: 0.9rem;
    transition: background-color 0.2s, color 0.2s;
}
.tab-button:hover { background-color: var(--secondary-color); }
.tab-button.active {
    background-color: var(--primary-color);
    border-color: var(--primary-color);
    color: var(--text-color-light);
}
main { padding: 1rem; }
.tab-content { display: none; }
.tab-content.active { display: block; }
h2, h3, h4 { margin-top: 0; }
.card {
    background-color: var(--card-background);
    border-radius: 8px;
    padding: 1.5rem;
    margin-bottom: 1.5rem;
    box-shadow: 0 2px 5px rgba(0,0,0,0.05);
    border: 1px solid var(--border-color);
    transition: background-color 0.3s, border-color 0.3s;
}
.form-group { margin-bottom: 1rem; }
.form-group label { display: block; margin-bottom: 0.5rem; font-weight: bold; }
.form-row {
    display: flex;
    gap: 1rem;
}
.form-row .form-group { flex: 1; }
input[type="text"], select, input[type="date"], input[type="number"] {
    width: 100%;
    padding: 0.75rem;
    border: 1px solid var(--border-color);
    border-radius: 4px;
    box-sizing: border-box;
    background-color: var(--background-color);
    color: var(--text-color);
}
body.theme-dark input[type="date"] {
    color-scheme: dark;
}
input:disabled, select:disabled {
    background-color: var(--background-color);
    opacity: 0.7;
    cursor: not-allowed;
}
button {
    cursor: pointer;
    border-radius: 5px;
    padding: 0.75rem 1.25rem;
    font-size: 1rem;
    border: none;
}
.btn-primary { background-color: var(--primary-color); color: var(--text-color-light); }
.btn-primary:hover { opacity: 0.9; }
.form-actions { display: flex; gap: 0.5rem; align-items: center; }
.btn-secondary { background-color: var(--secondary-color); color: white; }
.btn-secondary:hover { opacity: 0.9; }
.icon-btn {
    background: none;
    border: none;
    cursor: pointer;
    font-size: 1.2rem;
    padding: 0.2rem 0.5rem;
    color: var(--secondary-color);
}
.icon-btn:hover { color: var(--primary-color); }
.icon-btn.delete:hover { color: var(--danger-color); }
.card-header-with-action {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1.5rem;
}
.card-header-with-action h3 {
    margin-bottom: 0;
}
/* --- Workout Log Tab Styles --- */
.workout-log-layout {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1.5rem;
    align-items: flex-start;
}
@media (max-width: 900px) { .workout-log-layout { grid-template-columns: 1fr; } }
.workout-header h3 { text-align: center; margin: 0; }
.nav-arrow {
    background: none;
    border: 1px solid var(--border-color);
    color: var(--text-color);
    padding: 0.5rem 0.75rem;
    font-size: 1rem;
    cursor: pointer;
}
.nav-arrow:disabled { color: var(--secondary-color); cursor: not-allowed; opacity: 0.5; }
.bodyweight-display strong {
    color: var(--text-color);
    margin-right: 0.5rem;
}
.bodyweight-display .icon-btn { font-size: 1rem; vertical-align: middle; }
#add-log-entry-form, #add-food-item-form {
    border-top: 1px solid var(--border-color);
    border-bottom: 1px solid var(--border-color);
    padding: 1.5rem 0;
    margin-bottom: 1.5rem;
}
.log-inputs { display: flex; gap: 1rem; align-items: flex-end; }
.log-inputs .form-group { flex-grow: 1; }
#search-results-container, #food-search-results-container {
    position: absolute;
    width: 100%;
    background-color: var(--card-background);
    border: 1px solid var(--border-color);
    border-top: none;
    border-radius: 0 0 4px 4px;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    max-height: 200px;
    overflow-y: auto;
    z-index: 100;
}
.search-result-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.75rem;
    cursor: pointer;
}
.search-result-item:hover {
    background-color: var(--primary-color);
    color: var(--text-color-light);
}
.search-result-item .icon-btn {
    font-size: 1rem;
    padding: 0 0.5rem;
    flex-shrink: 0;
}
#workout-log-entries, #workout-summary-content, #food-log-entries { width: 100%; }
.log-table { width: 100%; border-collapse: collapse; margin-top: 1rem; margin-bottom: 1.5rem; }
.log-table th, .log-table td { text-align: left; padding: 0.75rem; border-bottom: 1px solid var(--border-color); }
.log-table th { color: var(--secondary-color); font-size: 0.9em; }
.workout-controls { margin-top: 1.5rem; text-align: right; }
/* --- Food Log Specific Styles --- */
.food-log-display-layout {
    display: grid;
    grid-template-columns: 1.5fr 1fr;
    gap: 2rem;
    align-items: flex-start;
    margin-top: 1.5rem;
    padding-top: 1.5rem;
    border-top: 2px solid var(--primary-color);
}
.totals-display {
    text-align: center;
    position: sticky;
    top: 1rem;
}
.totals-display h3 { margin: 0 0 0.5rem 0; }
.totals-display p { font-size: 1.1rem; margin: 0; margin-bottom: 1.5rem; }
.chart-container {
    position: relative;
    max-width: 300px;
    margin: auto;
}
@media (max-width: 900px) {
    .food-log-display-layout { grid-template-columns: 1fr; }
    .totals-display { position: static; }
}
/* --- My Progress Tab Styles --- */
.progress-charts-layout {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 1.5rem;
    align-items: flex-start;
}
.chart-wrapper {
    position: relative;
    height: 300px;
    width: 100%;
    margin-top: 1rem;
}
.reset-zoom-btn {
    position: absolute;
    top: 5px;
    right: 5px;
    z-index: 10;
    padding: 0.2rem 0.5rem;
    font-size: 0.8em;
    opacity: 0.7;
    background-color: var(--secondary-color);
    color: var(--text-color-light);
}
.reset-zoom-btn:hover {
    opacity: 1;
}
@media (max-width: 1200px) { .progress-charts-layout { grid-template-columns: 1fr; } }
/* --- About Me Tab Styles --- */
.about-me-layout {
    display: grid;
    grid-template-columns: 1.5fr 1fr;
    gap: 1.5rem;
    align-items: flex-start;
}
#calorie-results-container h4 {
    color: var(--secondary-color);
    border-bottom: 1px solid var(--border-color);
    padding-bottom: 0.5rem;
    margin-bottom: 1rem;
}
#calorie-results-container p { font-size: 1.1rem; line-height: 1.6; }
#calorie-results-container strong { font-size: 1.2rem; color: var(--primary-color); }
@media (max-width: 900px) { .about-me-layout { grid-template-columns: 1fr; } }
/* Manage Exercises List Styles */
.exercise-item { display: flex; justify-content: space-between; align-items: center; }
.exercise-item .actions { display: flex; gap: 0.5rem; }
/* --- Additions for Food Search UX --- */
.search-results-header {
    padding: 0.5rem 0.75rem 0.25rem;
    margin: 0;
    font-size: 0.8em;
    font-weight: bold;
    color: var(--secondary-color);
    background-color: var(--background-color);
    border-bottom: 1px solid var(--border-color);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}
#food-search-results-container h6:first-child {
    border-top: none;
    margin-top: -1px;
}
.search-meta-info {
    padding: 0.75rem;
    text-align: center;
    color: var(--secondary-color);
    font-style: italic;
    font-size: 0.9em;
}
#food-macro-details {
    border-top: 1px dashed var(--border-color);
    padding-top: 1rem;
    margin-top: 1rem;
    display: none;
}
/* --- Additions for In-Line Workout Editing --- */
.log-table tr.edit-mode {
    background-color: color-mix(in srgb, var(--primary-color) 10%, var(--card-background));
}
.log-table input[type="number"],
.log-table input[type="text"] {
    width: 95%;
    padding: 0.5rem;
    font-size: 1em;
    background-color: var(--background-color);
    color: var(--text-color);
    border: 1px solid var(--border-color);
    border-radius: 4px;
}
.log-table .actions-cell .icon-btn {
    font-size: 1.5rem;
}
.log-table .icon-btn.save:hover {
    color: #2a9d8f;
}
.log-table .icon-btn.cancel:hover {
    color: var(--danger-color);
}
.search-results-container-inline {
    position: absolute;
    width: 100%;
    background-color: var(--card-background);
    border: 1px solid var(--border-color);
    border-top: none;
    border-radius: 0 0 4px 4px;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    max-height: 200px;
    overflow-y: auto;
    z-index: 100;
}
.search-results-container {
    position: absolute;
    background-color: var(--card-background);
    border: 1px solid var(--border-color);
    border-top: none;
    border-radius: 0 0 4px 4px;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    max-height: 200px;
    overflow-y: auto;
    z-index: 1000; /* Ensure it's on top */
}
/* --- Additions for Manage Exercises Layout --- */
#exercise-list-layout {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 1.5rem;
}
.exercise-category-card {
    margin-bottom: 0;
}
.exercise-category-card .exercise-item:not(:last-child) {
    border-bottom: 1px solid var(--border-color);
}
.exercise-category-card .exercise-item {
    padding: 0.75rem 0;
}
/* --- Additions for Create Workout Form Layout --- */
.form-inline-group {
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
    align-items: flex-end;
}
.form-inline-group .form-group {
    margin-bottom: 0;
    flex-grow: 1;
    flex-basis: 200px;
}
.form-inline-group button {
    flex-shrink: 0;
}
/* --- Definitive Fix for Workout Header Alignment --- */
.workout-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 1rem;
}
.workout-title-group {
    flex-grow: 1;
    text-align: center;
}
.workout-header-actions {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    flex-shrink: 0;
}
.bodyweight-display {
    padding: 0.5rem 0 0 0;
    margin-bottom: 0;
    font-size: 1rem;
    color: var(--secondary-color);
}
.workout-header .nav-arrow {
   width: auto;
   flex-shrink: 0;
}
.log-table .actions-cell {
    width: 1%;
    white-space: nowrap;
    text-align: right;
}
/* --- Macro and Calorie Goal Color Coding --- */
.totals-display .macro-value {
    padding: 0 0.25em;
    display: inline-block;
}
.totals-display .macro-red,
.totals-display .macro-green,
.totals-display .macro-yellow,
.totals-display .macro-default {
    font-weight: bold;
}
.totals-display .macro-red {
    color: var(--danger-color);
}
.totals-display .macro-green {
    color: var(--success-color);
}
.totals-display .macro-yellow {
    color: var(--warning-color);
}
.totals-display .macro-default {
    color: var(--text-color);
}
#calorie-goal-progress {
    font-size: 1.5rem;
    font-weight: bold;
    margin-bottom: 1rem;
}
#calorie-goal-progress .calories-consumed {
    color: inherit;
}
/* --- Admin User List Styles --- */
.status-indicator {
    display: inline-block;
    width: 12px;
    height: 12px;
    border-radius: 50%;
    margin-right: 8px;
}
.status-indicator.online {
    background-color: var(--success-color);
}
.status-indicator.offline {
    background-color: var(--secondary-color);
}
.icon-btn.reset-pin:hover {
    color: var(--primary-color);
}
/* --- Barcode Scanner Styles --- */
.input-with-icon {
    position: relative;
}
#food-item-name {
    padding-right: 50px;
}
#scan-barcode-btn {
    position: absolute;
    bottom: 4px;
    right: 5px;
    height: 36px;
    width: 36px;
    padding: 0;
    border: none;
    background-color: transparent;
    cursor: pointer;
    opacity: 0.6;
    background-color: var(--secondary-color);
    -webkit-mask-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3e%3cpath d='M2 6h2v12H2V6zm3 0h1v12H5V6zm2 0h2v12H7V6zm3 0h2v12h-2V6zm3 0h1v12h-1V6zm2 0h3v12h-3V6zm4 0h2v12h-2V6z'/%3e%3c/svg%3e");
    mask-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3e%3cpath d='M2 6h2v12H2V6zm3 0h1v12H5V6zm2 0h2v12H7V6zm3 0h2v12h-2V6zm3 0h1v12h-1V6zm2 0h3v12h-3V6zm4 0h2v12h-2V6z'/%3e%3c/svg%3e");
    -webkit-mask-size: 75%;
    mask-size: 75%;
    -webkit-mask-repeat: no-repeat;
    mask-repeat: no-repeat;
    -webkit-mask-position: center;
    mask-position: center;
}
body.theme-dark #scan-barcode-btn {
    background-color: var(--text-color);
}
#scan-barcode-btn:hover {
    opacity: 1;
    background-color: var(--primary-color);
}
.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.7);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 1000;
}
.modal-content {
    background-color: var(--card-background);
    padding: 20px;
    border-radius: 8px;
    width: 90%;
    max-width: 500px;
    text-align: center;
}
#barcode-reader {
    width: 100%;
    border: 1px solid var(--border-color);
    margin-bottom: 1rem;
}
/* --- REFINED CALENDAR STYLES (SOFTER & SPACED) --- */
#workout-calendar-container {
    padding: 15px;
    border-bottom: 1px solid var(--border-color);
    margin-bottom: 15px;
}
.calendar-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
}
.calendar-header h4 {
    margin: 0;
    color: var(--text-color);
    font-size: 1.1em;
}
.calendar-days-header {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    text-align: center;
    margin-bottom: 5px;
    padding: 0 4px; /* Align with the new gap */
}
.calendar-days-header div {
    font-weight: bold;
    font-size: 0.8em;
    color: var(--secondary-color);
}
.calendar-days-grid {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: 4px; /* This creates the padding/space between days */
}
.calendar-day {
    padding: 4px;
    cursor: pointer;
    position: relative;
    transition: background-color 0.2s;
    min-height: 60px;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    align-items: center;
    /* New border and border-radius for the softer look */
    border: 1px solid var(--border-color);
    border-radius: 8px; /* Adjust this value to make it more/less round */
}
.calendar-day:hover {
    background-color: var(--hover-background);
}
.day-number {
    font-size: 0.9em;
    padding: 4px 0;
}
/* Updated "today" highlight to be cleaner */
.calendar-day.is-today {
    border-color: var(--primary-color);
    background-color: rgba(var(--primary-color-rgb), 0.1);
}
.calendar-day.is-today .day-number {
    font-weight: bold;
    color: var(--primary-color);
}
.calendar-day.other-month {
    background-color: var(--background-color-alt);
    border-color: transparent; /* Hide border for non-month days */
}
.calendar-day.other-month .day-number {
    opacity: 0.5;
}
.calendar-workout-bar {
    width: 100%;
    border: none;
    color: white;
    font-size: 0.75em;
    font-weight: bold;
    padding: 3px 0;
    border-radius: 4px;
    cursor: pointer;
    text-transform: uppercase;
    transition: filter 0.2s;
}
/* --- CALENDAR BAR COLORS FOR NEW CATEGORIES --- */
.calendar-workout-bar.category-upper-body { background-color: #17a2b8; } /* Teal */
.calendar-workout-bar.category-lower-body { background-color: #6f42c1; } /* Indigo */

/* Special style for Full Body for high contrast */
.calendar-workout-bar.category-full-body { 
    background-color: #f8f9fa; /* Off-white */
    color: #212529; /* Dark text for readability */
    border: 1px solid #adb5bd; /* A subtle border to pop on light backgrounds */
}
.calendar-day.is-selected {
    /* A thick, white border to make it stand out */
    border: 2px solid white;
    /* A subtle background to further distinguish it */
    background-color: var(--hover-background);
}
.calendar-workout-bar:hover {
    filter: brightness(1.15);
}
.calendar-workout-bar.category-push { background-color: #d32f2f; }
.calendar-workout-bar.category-pull { background-color: #7b1fa2; }
.calendar-workout-bar.category-legs { background-color: #388e3c; }
.calendar-workout-bar.category-other { background-color: #f57c00; }
/* --- REFINED FOOD CALENDAR BAR STYLES --- */
.food-calendar-bar {
    width: 100%;
    border: none;
    color: white;
    font-size: 0.75em;
    font-weight: bold;
    padding: 3px 0; /* Adjusted padding for a shorter bar */
    border-radius: 4px;
    cursor: pointer;
    transition: filter 0.2s;
    /* Removed multi-line properties */
}
.food-calendar-bar:hover {
    filter: brightness(1.15);
}
/* Color-coding based on the existing macro classes */
.food-calendar-bar.macro-green { background-color: #388e3c; } /* Green */
.food-calendar-bar.macro-yellow { background-color: #fbc02d; } /* Yellow */
.food-calendar-bar.macro-red { background-color: #d32f2f; } /* Red */
.food-calendar-bar.macro-default { background-color: #546e7a; } /* Grey for no goal */
/* --- NEW LAYOUT FOR FOOD LOG TAB --- */
#tab-food-log > section {
    /* Set a maximum width - 800px is a good starting point */
    max-width: 1200px;
    /* On smaller screens, it will take up 100% of the available space */
    width: 100%;
    /* This is the magic for centering a block element */
    margin-left: auto;
    margin-right: auto;
}
#food-calendar-container {
    margin-bottom: 20px;
}
/* --- NEW STYLES FOR WORKOUT TIMER --- */
#workout-timer-display {
    font-size: 1.1em;
    font-weight: bold;
    color: var(--text-color);
    margin-top: 8px;
    background-color: var(--background-color-alt);
    padding: 5px 10px;
    border-radius: 6px;
    display: inline-flex; /* Use flex to align icon and text */
    align-items: center;
    gap: 8px; /* Space between icon and time */
}
/* --- NEW STYLES FOR REST TIMER --- */
#rest-timer-section {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 15px;
    padding: 20px;
}
#rest-timer-display {
    font-size: 3.5em; /* Big, easy to read timer */
    font-weight: bold;
    font-family: 'Courier New', Courier, monospace; /* Monospaced for stable width */
    color: var(--text-color);
}
.rest-timer-controls {
    display: flex;
    gap: 15px;
}
.rest-timer-controls button {
    min-width: 100px; /* Give buttons a nice uniform width */
}
/* --- NEW FOOD LOG ENTRY STYLES --- */
.food-entries-list {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}
.food-item-details {
    border: 1px solid var(--border-color);
    border-radius: 6px;
    background-color: var(--background-color);
}
.food-item-summary {
    display: flex;
    justify-content: space-between;
    padding: 0.75rem 1rem;
    cursor: pointer;
    list-style: none; /* Hide the default triangle */
}
.food-item-summary::-webkit-details-marker {
    display: none; /* Hide triangle in Chrome/Safari */
}
.food-item-summary:hover {
    background-color: var(--hover-background, rgba(0,0,0,0.05));
}
.food-item-summary .food-name {
    font-weight: bold;
}
.food-item-summary .food-calories {
    color: var(--text-color);
    font-weight: bold;
}
.food-item-content {
    padding: 0 1rem 1rem 1rem;
    border-top: 1px solid var(--border-color);
}
.macro-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 1rem;
    padding: 1rem 0;
    color: var(--secondary-color);
    font-size: 0.9em;
}
.food-item-actions {
    text-align: right;
}
.edit-quantity-form {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    justify-content: flex-end;
    padding-top: 0.5rem;
}
.edit-quantity-form input,
.edit-quantity-form select {
    width: 80px;
    padding: 0.5rem;
    text-align: center;
}
#custom-food-modal .modal-content {
    text-align: left;
}
#custom-food-modal h2 {
    text-align: center;
    margin-bottom: 1rem;
}
#custom-food-modal p {
    text-align: center;
    color: var(--secondary-color);
    margin-bottom: 1.5rem;
}
#custom-food-modal hr {
    border: none;
    border-top: 1px solid var(--border-color);
    margin: 1.5rem 0;
}
#custom-food-modal .form-actions {
    margin-top: 1.5rem;
    justify-content: flex-end;
}
/* --- NEW SETTINGS MENU STYLES --- */
.settings-menu {
    position: relative;
    display: inline-block;
}
#settings-menu-btn {
    font-size: 1.5rem;
    color: var(--text-color-light);
}
.dropdown-content {
    display: none; /* Hidden by default, JS will toggle this */
    position: absolute;
    right: 0;
    top: calc(100% + 0.5rem); /* Position below the button */
    background-color: var(--card-background);
    min-width: 220px;
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    z-index: 100;
    padding: 0.5rem 0;
transform: translateZ(0);
}
.dropdown-content hr {
    margin: 0.5rem 0;
    border: none;
    border-top: 1px solid var(--border-color);
}
.dropdown-item {
    width: 100%;
    padding: 0.75rem 1.5rem;
    text-align: left;
    background-color: transparent;
    color: var(--text-color);
    border: none;
    font-size: 1rem;
}
.dropdown-item:hover {
    background-color: var(--background-color);
}
/* Specific styles for items moved into the dropdown */
.dropdown-content .tab-button {
    border: none; /* Remove border from tab buttons */
}
.dropdown-content .theme-switcher-container {
    display: flex;
    justify-content: flex-start; /* Or just remove justify-content */
    align-items: center;
    gap: 0.5rem; /* Add some space between label and select */
}
#logout-btn {
    width: 100%;
    background: none;
    color: var(--danger-color);
    font-weight: bold;
}
#logout-btn:hover {
    background-color: var(--background-color);
}
.dropdown-content #theme-switcher {
    width: auto; /* Override the global 100% width */
    flex-shrink: 0; /* Prevent it from shrinking if space is tight */
}
.programs-layout {
    display: grid;
    grid-template-columns: 300px 1fr;
    gap: 1.5rem;
    align-items: flex-start;
}
@media (max-width: 900px) {
    .programs-layout {
        grid-template-columns: 1fr;
    }
}
.program-list-item {
    padding: 1rem;
    cursor: pointer;
    border-bottom: 1px solid var(--border-color);
    transition: background-color 0.2s;
}
.program-list-item:last-child {
    border-bottom: none;
}
.program-list-item:hover {
    background-color: var(--background-color);
}
.program-list-item.active {
    background-color: var(--primary-color);
    color: var(--text-color-light);
    font-weight: bold;
}
.program-detail-panel .log-table td:first-child {
    font-weight: bold;
}
.program-notes {
    margin-top: 2rem;
    padding: 1rem;
    background-color: var(--background-color);
    border-radius: 6px;
}
#tab-programs {
    max-width: 1400px; /* Adjust this value to make it wider or narrower */
    margin: 0 auto;
}
.program-exercise-list {
    /* Add some space between workout sections */
    margin-bottom: 1rem;
}
.program-exercise-row {
    display: grid;
    grid-template-columns: 3fr 1fr; /* 75% / 25% split */
    gap: 1rem;
    padding: 0.75rem;
    border-bottom: 1px solid var(--border-color);
}
.program-exercise-list .program-exercise-row:last-child {
    border-bottom: none; /* Remove border from last item */
}
.program-exercise-row span:last-child {
    text-align: right;
}
.workout-log-entry-row {
    display: grid;
    grid-template-columns: 3fr 1fr 1fr 1fr 40px; /* Exercise, Weight, Sets, Reps, Actions */
    gap: 0.75rem;
    align-items: center;
    padding: 0.5rem 0;
    border-bottom: 1px solid var(--border-color);
}
.workout-log-entry-row input {
    font-size: 1em;
    padding: 0.5rem;
}
.workout-log-entry-row .actions-cell {
    text-align: right;
}
.workout-log-header-row, .workout-log-entry-row {
    display: grid;
    grid-template-columns: 3fr 1fr 1fr 1fr 40px; /* Exercise, Weight, Sets, Reps, Actions */
    gap: 0.75rem;
    align-items: center;
}
.workout-log-header-row {
    padding: 0 0.5rem 0.5rem 0.5rem;
    border-bottom: 2px solid var(--border-color);
    font-weight: bold;
    color: var(--secondary-color);
    font-size: 0.9em;
}
.workout-log-header-row span:not(:first-child), .workout-log-entry-row .center-text {
    text-align: center;
}
.workout-log-entry-row {
    padding: 0.5rem 0;
    border-bottom: 1px solid var(--border-color);
}
.workout-log-entry-row input {
    font-size: 1em;
    padding: 0.5rem;
    background-color: var(--background-color);
    color: var(--text-color);
    border: 1px solid var(--border-color);
    border-radius: 4px;
    width: 100%;
    box-sizing: border-box;
    text-align: center;
}
.workout-log-entry-row input[data-field="name"] {
    text-align: left;
}
.workout-log-entry-row .actions-cell {
    text-align: right;
}
#workout-exercise-search-results {
    position: absolute; /* This allows JS to position it freely */
}

/* --- REFINED PERSONAL RECORDS (PR) STYLES --- */

/* This now controls the grid of exercise cards.
   Adjust minmax to control card size. 220px is ~30% smaller than a 300px default. */
.pr-layout {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 1.5rem;
}

/* Make the exercise name font a few sizes larger */
.pr-layout .card h4 {
    font-size: 1.5em; /* Increased from default h4 size */
    margin-bottom: 1.25rem;
    text-align: center;
}

/* Stack the metric boxes vertically instead of side-by-side */
.pr-card-metrics {
    display: flex;
    flex-direction: column;
    gap: 0.75rem; /* Reduced gap for tighter vertical stacking */
}

/* General styling for each metric box */
.pr-metric {
    background-color: var(--background-color);
    padding: 0.75rem;
    border-radius: 6px;
    border: 1px solid var(--border-color);
}

.pr-metric-value {
    display: block;
    font-size: 1.8em;
    font-weight: bold;
}

.pr-metric-label {
    font-size: 0.8em;
    color: var(--secondary-color);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}


/* --- NEW: COLORING FOR PR METRICS --- */

/* Color for the Estimated 1-Rep Max value (uses theme's success green) */
.pr-metric.metric-e1rm .pr-metric-value {
    color: var(--success-color);
}

/* For dark themes, make the "Heaviest Lift" value white */
body.theme-dark .pr-metric.metric-heavy-lift .pr-metric-value {
    color: var(--text-color-light); /* This is your theme's "white" */
}

/* For light/forest themes, use a dark color to ensure readability */
body:not(.theme-dark) .pr-metric.metric-heavy-lift .pr-metric-value {
    color: var(--header-background); /* This is a dark color from your themes */
}
/* --- REFINED "ADD EXERCISE" BUTTON STYLES (V2) --- */

/* This targets the container for the button and aligns it to the left */
#current-workout-section .add-exercise-row {
    padding: 1rem 0;
    text-align: left;
}

/* This uses a more specific selector (#current-workout-section) to guarantee the styles apply */
#current-workout-section .add-exercise-btn {
    /* --- Color and Shape --- */
    background-color: var(--success-color); /* Green background */
    color: var(--text-color-light);         /* White '+' sign */
    border: none;                           /* Remove all borders */
    border-radius: 50%;                     /* Make it a perfect circle */
    
    /* --- Sizing --- */
    width: 44px;                            /* A comfortable but compact size */
    height: 44px;
    padding: 0;                             /* Remove any default padding */

    /* --- The '+' Symbol --- */
    font-size: 2.2rem;                      /* A nice large plus sign */
    font-weight: 300;                       /* A thinner, more modern font weight */
    line-height: 44px;                      /* Vertically centers the '+' in the button */
    text-align: center;                     /* Horizontally centers the '+' */

    /* --- Interaction --- */
    cursor: pointer;
    opacity: 0.9;
    transition: opacity 0.2s, transform 0.2s;
}

#current-workout-section .add-exercise-btn:hover {
    opacity: 1;
    transform: scale(1.05); /* A subtle "grow" effect on hover */
    border-style: none;     /* Ensure no border appears on hover */
}
/* --- NEW: Confirmation Modal Styles --- */
#confirmation-modal .modal-content {
    max-width: 450px;
    text-align: center;
}

#confirmation-modal h3 {
    margin-bottom: 1rem;
    font-size: 1.4em;
}

#confirmation-modal p {
    color: var(--secondary-color);
    margin-bottom: 1.5rem;
    font-size: 1.1em;
    line-height: 1.5;
}

/* This makes the confirm button red for delete actions */
#confirmation-confirm-btn[data-danger="true"] {
    background-color: var(--danger-color);
}
/* The main container for a single exercise and its sets */
.exercise-card {
    background-color: var(--card-background);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    margin-bottom: 1.5rem;
    padding: 1rem;
    box-shadow: 0 2px 5px rgba(0,0,0,0.05);
}

/* Header within the card holding the exercise name and action buttons */
.exercise-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding-bottom: 0.75rem;
    margin-bottom: 1rem;
}

.exercise-header h4 {
    margin: 0;
    font-size: 1.5em;
}

/* Container for the pencil/trash icons */
.exercise-header .actions {
    display: flex;
    gap: 0.5rem;
}

/* The list of all sets for an exercise */
.set-list {
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

/* A single set row */
.set-row {
    display: grid;
    grid-template-columns: 2fr 2fr 1fr; /* Weight, Reps, Done Checkbox */
    gap: 1rem;
    align-items: center;
    padding-left: 1.5rem; /* Indent sets under the exercise */
    position: relative;
}

/* A small number for the set (1, 2, 3, etc.) */
.set-number {
    position: absolute;
    left: 0;
    top: 50%;
    transform: translateY(-50%);
    font-size: 0.9em;
    font-weight: bold;
    color: var(--secondary-color);
}

/* Header row for "Weight", "Reps" */
.set-row-header {
    font-size: 0.8em;
    font-weight: bold;
    color: var(--secondary-color);
    padding-left: 1.5rem;
    margin-bottom: 0.5rem;
    display: grid;
    grid-template-columns: 2fr 2fr 1fr;
    gap: 1rem;
}

/* The new +/- stepper input component */
.stepper-input {
    display: flex;
    align-items: center;
}

.stepper-input input[type="number"] {
    text-align: center;
    border-left: none;
    border-right: none;
    border-radius: 0;
    padding: 0.75rem 0.25rem;
    font-size: 1.1em;
    /* Hide the default browser spinners */
    -moz-appearance: textfield;
}
.stepper-input input::-webkit-outer-spin-button,
.stepper-input input::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0;
}

.stepper-btn {
    width: 44px;
    height: 44px; /* Matches input padding + font size */
    background-color: var(--background-color);
    border: 1px solid var(--border-color);
    color: var(--text-color);
    font-size: 1.5rem;
    font-weight: bold;
    cursor: pointer;
    padding: 0;
    line-height: 44px;
}
.stepper-btn:hover {
    background-color: var(--secondary-color);
    color: var(--text-color-light);
}
.stepper-btn.minus { border-radius: 4px 0 0 4px; }
.stepper-btn.plus { border-radius: 0 4px 4px 0; }


/* The smaller green '+' button for adding a new set */
.add-set-btn-container {
    padding-left: 1.5rem; /* Align with sets */
    margin-top: 1rem;
}

.add-set-btn {
    background-color: var(--success-color);
    color: var(--text-color-light);
    border: none;
    width: 38px;
    height: 38px;
    border-radius: 50%;
    font-size: 1.8rem;
    font-weight: 300;
    line-height: 38px;
    padding: 0;
    cursor: pointer;
    opacity: 0.85;
    transition: all 0.2s;
}
.add-set-btn:hover {
    opacity: 1;
    transform: scale(1.05);
}

/* The "Done" button for an entire exercise block */
.exercise-done-btn-container {
    text-align: right;
    margin-top: 1.5rem;
    border-top: 1px solid var(--border-color);
    padding-top: 1rem;
}
/* --- WORKOUT LOG V3 - INLINE REST TIMER --- */

/* Update the set row grid to add a column for the new checkmark button */
.set-row {
    grid-template-columns: 2fr 2fr 40px 40px; /* Weight, Reps, Check, Delete */
}

/* Style for the new checkmark button */
.complete-set-btn:hover {
    color: var(--success-color);
}

/* The container for the new inline timer */
.rest-timer-inline {
    /* This makes the timer span all columns of the grid its in */
    grid-column: 1 / -1;
    display: flex;
    justify-content: space-between;
    align-items: center;
    background-color: var(--background-color);
    padding: 0.75rem 1.25rem;
    margin-top: 0.75rem;
    border-radius: 6px;
    animation: fadeIn 0.3s ease-in-out;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(-10px); }
    to { opacity: 1; transform: translateY(0); }
}

.rest-timer-inline-time {
    font-size: 1.5em;
    font-weight: bold;
    font-family: 'Courier New', Courier, monospace;
    color: var(--primary-color);
}

.rest-timer-inline-actions .btn-secondary {
    padding: 0.4rem 0.8rem;
    font-size: 0.9em;
}
/* --- PERSONAL RECORDS V3 - CATEGORY BOX LAYOUT --- */

/* The main container for a whole category (e.g., "Push") */
.pr-category-group {
    background-color: var(--card-background);
    border: 1px solid var(--border-color);
    border-radius: 12px; /* Slightly larger radius for the main container */
    padding: 1.5rem;
    margin-bottom: 2rem;
    box-shadow: 0 4px 12px rgba(0,0,0,0.08);
}
body.theme-dark .pr-category-group {
    box-shadow: 0 4px 12px rgba(0,0,0,0.2);
}

/* The category title (e.g., H2 for "Push") */
.pr-category-group h2 {
    font-size: 1.8em;
    margin: 0 0 1.5rem 0;
    padding-bottom: 1rem;
    border-bottom: 1px solid var(--border-color);
    color: var(--text-color);
}

/* The grid for exercise cards within a category */
.pr-layout {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); /* Slightly wider cards */
    gap: 1.5rem;
}

/* Style for the individual exercise cards (e.g., "Bench Press") */
.pr-layout .card {
    margin-bottom: 0; /* Let the grid gap handle spacing */
    /* Make the card background contrast with the category group background */
    background-color: var(--background-color); 
    transition: transform 0.2s ease-in-out;
}

.pr-layout .card:hover {
    transform: translateY(-5px);
}

/* These rules from before are still needed for the inside of the card */
.pr-layout .card h4 {
    font-size: 1.5em;
    margin-bottom: 1.25rem;
    text-align: center;
}
.pr-card-metrics {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
}
.pr-metric {
    /* Use a slightly different background for contrast */
    background-color: color-mix(in srgb, var(--background-color) 50%, var(--card-background) 50%);
    padding: 0.75rem;
    border-radius: 6px;
    border: 1px solid var(--border-color);
}
/* All the coloring and value/label styles remain the same */
